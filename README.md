# vivacity-proto-buffet
Public-access repo with Vivacity's protobuf message schema

## Introduction
This is a schema for exchanging data on detection of objects on roads (eg cars, pedestrians, cyclists).

This schema is made publically available to encourage cross-industry collaboration and open exchange of data. It is also intended to:
- Assist consumers of detection data by ensuring some degree of interoperability between various sources which supply the data
- Allow new suppliers of data sources (eg detectors) to enter the market through access to an agreed-upon specification.
- Provide purchasers of future detection capabilities an easier route to procuring and understanding interoperability
- Cover current and future technologies.
- Facilitate collaboration by being open-source and extensible.

## Why Use Protobuf?
Protocol buffers are a language-neutral, platform-neutral extensible mechanism for serializing structured data. Compilers to create source code for handling these messages are available for all popular programming langages.

More information on protocol buffers can be found here:
https://developers.google.com/protocol-buffers

Serialisation ensures that messages are compact, saving bandwidth. The structured nature of the schemas, and their ease of extensibility makes collaboration and updates simple.

The job of packing and unpacking data for transmission is handled automatically by source code generated by the protobuf complier. This means effort can be focussed on the application producing or consuming the data, rather than the "nuts and bolts" of messaging and transmission.

The protobuf tutorials are an excellent way to understand how to use these schemas:
https://developers.google.com/protocol-buffers/docs/tutorials

## Supported Languages <a name="supported"></a>
Generating protobuf classes should be as simple as calling, from the project root directory:
```bash
./generate_<language>.sh
```
If a custom file path to store the generated proto classes is required, call:
```bash
./generate_<language>.sh custom/path/for/generated/proto/classes
```
This should generate a folder called `vivacity` with the `*.proto` files and generated protobuf classes in your specified folder. e.g. for golang:
```bash
└── vivacity-proto-buffet
    ├── core
    │   ├── alerts.pb.go
    │   ├── alerts.proto
    │   ├── classifying_detector_class_types.pb.go
    │   ├── classifying_detector_class_types.proto
    |   ├── ...
    |   └── ...
```
### **All Languages Requirements**:
* protoc >= v3.11.0
#### **<u>Go</u>** <a name="golang"></a>
* protoc-gen-go >= 1.4.0:
    * **Required**. Install by running `go get -u github.com/golang/protobuf/protoc-gen-go`
#### **<u>Python</u>** <a name="python"></a>
* Optional **grpc support** - allows script to call `python -m grpc_tools.protoc` and generates `*_pb2_grpc.py` files. `requirements.txt` is given below:
  ```txt
  grpcio
  protobuf==3.11.0
  grpcio-tools
  ```

#### **<u>Javascript / Typescript</u>** <a name="js-ts"></a>
* `ts-protoc-gen` >= 0.12.0
    * **Required**. Install with `yarn add ts-protoc-gen`

## Vivacity Message Schema
![alt text](docs/images/dtf.png "Detector tracker frame message structure")